<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xmlns:int="http://www.springframework.org/schema/integration"
       xmlns:jms="http://www.springframework.org/schema/integration/jms"
       xmlns:jdbc="http://www.springframework.org/schema/integration/jdbc"
       xmlns:context="http://www.springframework.org/schema/context"

       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.0.xsd
       http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
       http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration-4.0.xsd
       http://www.springframework.org/schema/integration/jms http://www.springframework.org/schema/integration/jms/spring-integration-jms-4.0.xsd
       http://www.springframework.org/schema/integration/jdbc http://www.springframework.org/schema/integration/jdbc/spring-integration-jdbc-4.0.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"
       >

    <context:component-scan base-package="integration.config,integration.service,ro.croco.integration.service,ro.croco.integration.config" />

    <int:poller id="poller" fixed-rate="15000"/>

    <int:channel id="syncRequestChannel"/>
    <int:channel id="syncResponseChannel"/>

    <jdbc:inbound-channel-adapter id="inboundAdapter"
                                  query="select * from DM_INTEGRATION_REQUEST"
                                  data-source="syncRequestDataSource"
                                  channel="syncRequestChannel">
        <int:poller ref="poller"/>
    </jdbc:inbound-channel-adapter>

    <int:service-activator id="channelLinking" ref="jdbcService" method="processMessage"
                           input-channel="syncRequestChannel" output-channel="syncResponseChannel"/>

</beans>
